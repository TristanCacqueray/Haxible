( Playbook
    [ HostPlay
        { hosts = "localhost"
        , tasks =
            [ Task
                { name = Nothing
                , taskModule =
                    ( "stat"
                    , Object
                        ( fromList
                            [
                                ( "path"
                                , String "/tmp"
                                )
                            ]
                        )
                    )
                , requires = []
                , register = Just "tmpstat"
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            , Task
                { name = Nothing
                , taskModule =
                    ( "command"
                    , Object
                        ( fromList
                            [
                                ( "_raw_params"
                                , String "echo tmp exist: {{ tmpstat.stat.exists }}"
                                )
                            ]
                        )
                    )
                , requires = [ "tmpstat" ]
                , register = Nothing
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            ]
        , hostVars = []
        , playAttrs =
            [
                ( "hosts"
                , String "localhost"
                )
            ]
        }
    , HostPlay
        { hosts = "zuul_executor"
        , tasks =
            [ Task
                { name = Nothing
                , taskModule =
                    ( "file"
                    , Object
                        ( fromList
                            [
                                ( "path"
                                , String "/etc/zuul"
                                )
                            ,
                                ( "state"
                                , String "directory"
                                )
                            ]
                        )
                    )
                , requires = []
                , register = Just "_etc_zuul"
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            , Task
                { name = Nothing
                , taskModule =
                    ( "command"
                    , Object
                        ( fromList
                            [
                                ( "_raw_params"
                                , String "echo Starting executor -c /etc/zuul/zuul.conf"
                                )
                            ]
                        )
                    )
                , requires = [ "_etc_zuul" ]
                , register = Nothing
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            ]
        , hostVars = []
        , playAttrs =
            [
                ( "hosts"
                , String "zuul_executor"
                )
            ]
        }
    , HostPlay
        { hosts = "zuul_scheduler"
        , tasks =
            [ Task
                { name = Nothing
                , taskModule =
                    ( "file"
                    , Object
                        ( fromList
                            [
                                ( "path"
                                , String "/etc/zuul"
                                )
                            ,
                                ( "state"
                                , String "directory"
                                )
                            ]
                        )
                    )
                , requires = []
                , register = Just "_etc_zuul"
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            , Task
                { name = Nothing
                , taskModule =
                    ( "command"
                    , Object
                        ( fromList
                            [
                                ( "_raw_params"
                                , String "echo Starting scheduler -c /etc/zuul/zuul.conf"
                                )
                            ]
                        )
                    )
                , requires = [ "_etc_zuul" ]
                , register = Nothing
                , loop = Null
                , vars = []
                , taskAttrs = []
                }
            ]
        , hostVars = []
        , playAttrs =
            [
                ( "hosts"
                , String "zuul_scheduler"
                )
            ]
        }
    ]
, "{-# LANGUAGE QuasiQuotes, ApplicativeDo, OverloadedStrings #-}
  {- cabal:
  build-depends: base, haxible
  ghc-options: -threaded -rtsopts -with-rtsopts=-N -with-rtsopts=-T
  -}
  module Main (main) where

  import Haxible.Eval

  main :: IO ()
  main = runHaxible playbook

  playbook :: AnsibleHaxl [Value]
  playbook = do
    _play0 <- play_localhost
    _play1 <- play_zuul_executor
    _play2 <- play_zuul_scheduler
    pure $ _play0 <> _play1 <> _play2

  play_localhost :: AnsibleHaxl [Value]
  play_localhost = do
    let playAttr = [("hosts", [json| "localhost" |])]
    tmpstat <- runTask playAttr [json| {"stat":{"path":"/tmp"}} |] []
    _var1 <- runTask playAttr [json| {"command":{"_raw_params":"echo tmp exist: {{ tmpstat.stat.exists }}"}} |] [("tmpstat", tmpstat)]
    pure [tmpstat, _var1]

  play_zuul_executor :: AnsibleHaxl [Value]
  play_zuul_executor = do
    let playAttr = [("hosts", [json| "zuul_executor" |])]
    _etc_zuul <- runTask playAttr [json| {"file":{"path":"/etc/zuul","state":"directory"}} |] []
    _var1 <- runTask playAttr [json| {"command":{"_raw_params":"echo Starting executor -c /etc/zuul/zuul.conf"}} |] [("_etc_zuul", _etc_zuul)]
    pure [_etc_zuul, _var1]

  play_zuul_scheduler :: AnsibleHaxl [Value]
  play_zuul_scheduler = do
    let playAttr = [("hosts", [json| "zuul_scheduler" |])]
    _etc_zuul <- runTask playAttr [json| {"file":{"path":"/etc/zuul","state":"directory"}} |] []
    _var1 <- runTask playAttr [json| {"command":{"_raw_params":"echo Starting scheduler -c /etc/zuul/zuul.conf"}} |] [("_etc_zuul", _etc_zuul)]
    pure [_etc_zuul, _var1]

  "
)